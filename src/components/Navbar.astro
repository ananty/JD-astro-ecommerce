---
// src/components/Navbar.astro (修正版 - 只有一个 ThemeToggle)
import ThemeToggle from './ThemeToggle.astro';

const navLinks = [
  { href: "/", label: "Home" },
  { href: "/product/spotify-premium", label: "Products" },
  { href: "/about", label: "About Us" },
  { href: "/contact", label: "Contact Us" },
];
const siteTitle = "Jaideepas";
const logoUrl = "/images/logo.svg";
---
<header class="sticky top-0 z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md shadow-sm dark:shadow-gray-700/50">
  <nav class="container mx-auto px-4 sm:px-6 lg:px-8" aria-label="Main navigation">
    <div class="flex items-center justify-between h-16 md:h-20">
      {/* Logo 和网站标题 (左侧) */}
      <div class="flex items-center">
        <a href="/" class="flex-shrink-0 flex items-center group" aria-label="Go to homepage">
          <img class="h-8 w-auto md:h-10 group-hover:opacity-80 transition-opacity" src={logoUrl} alt={`${siteTitle} Logo`} />
          <span class="ml-2 md:ml-3 text-xl md:text-2xl font-bold text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors">
            {siteTitle}
          </span>
        </a>
      </div>

      {/* 导航和控件 (右侧) */}
      <div class="flex items-center">
        {/* 桌面端导航链接 (仅在桌面端显示) */}
        <div class="hidden md:flex items-center space-x-1 lg:space-x-2">
          {navLinks.map(link => {
            const isActive = Astro.url.pathname === link.href || 
                             (link.href.startsWith('/product') && Astro.url.pathname.startsWith('/product'));
            return (
              <a href={link.href} class:list={[/* ... 样式保持不变 ... */]}>
                {link.label}
              </a>
            );
          })}
        </div>

        {/* 主题切换按钮 (始终显示) */}
        <div class="ml-4"> {/* 给了它一个固定的左边距 */}
          <ThemeToggle />
        </div>
        
        {/* 移动端汉堡菜单按钮 (仅在移动端显示) */}
        <div class="md:hidden ml-2">
          <button 
            id="mobile-menu-button" 
            type="button" 
            class="inline-flex items-center justify-center p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500" 
            aria-controls="mobile-menu" 
            aria-expanded="false"
            aria-label="Open main menu"
          >
            <span class="sr-only">Open main menu</span>
            <svg class="block h-6 w-6" id="menu-icon-open" ... > ... </svg>
            <svg class="hidden h-6 w-6" id="menu-icon-close" ... > ... </svg>
          </button>
        </div>
      </div>
    </div>
  </nav>

  {/* 移动端展开的菜单内容 (保持不变) */}
  <div class="md:hidden hidden border-t border-gray-200 dark:border-gray-700" id="mobile-menu">
    <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
      {navLinks.map(link => {
        // ... 这部分代码保持不变 ...
        return <a href={link.href} class:list={[/* ... */]}>{link.label}</a>;
      })}
    </div>
  </div>
</header>

{/* 脚本也保持不变 */}
<script>
  // ... 移动端菜单切换逻辑 ...
</script>